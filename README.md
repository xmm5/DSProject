# Проект "близкие вакансии"

Реализация проекта была разделена на три части:
1. Выгрузка данных вакансий и резюме.
2. Вычисление меры сходства ваканий и их ранжирование.
3. Реализация REST-сервиса для поиска Топ-10 наиболее релевантный вакансий.

Для реализации проекта используется:
- IDE PyCharm (Community Edition)
- Стандартные библиотеки:
  - concurrent, datetime, hashlib, json, os, random, re, threading, time
- Дополнительные библиотеки:
  - bs4, gensim, nltk, numpy, pandas, pickle, pymorphy2, requests, sklearn

## 1. Выгрузка данных вакансий

Данный раздел состоит из следующих шагов:

1. Выгрузить описания открытых вакансий и резюме из площадки 'hh.ru'.

    Для выгрузки данных с сайта 'hh.ru' используются классы VacancyLoader,
    ResumeLoader и HHApi. Классы VacancyLoader и ResumeLoader реализуют
    скачивание описания вакансий и резюме и кэширование их на диске (для
    возможности работы в offline). Класс HHApi представляет API для скачивания
    данных с сайта 'hh.ru'.

    В процессе загрузки данных в директории проекта будет создана директория
    данных '/data'. Данная директория хранит артефакты генерируемые в процессе
    работы программы. После загрузки описаний вакансий и резюме в директории
    '/data' будут созданы директории:
    - '/resume'
    - '/resume_pages'
    - '/vacancy'
    - '/vacancy_pages'

2. Предобработать текст описаний вакансий и резюме.

    Для обработки текста ваканий и резюме используется класс TextTransformer
    который реализует следующие функции:
    - Фильтрацию текста.
       - Удаление HTML-тегов.
       - Удаление HTML-entities.
       - Удаление ссылок.
       - Удаление специальных смволов.
       - Удаление русских и английских стоп-слов.
    - Токенизацию текста.
       - Для этого используется RegexpTokenizer.
    - Приведение текста к нормальной форме.
       - Лемматизация для русских и английских слов.
       - Cтемминг для русских и английских слов.

    В процессе обработки данных в директории '/data' будет создана директория
    '/nltk', которая будет содержать ресурсы библиотеки nltk.

3. Подготовить датасет и сохранить его на диск в формате pickle.

    Для подготовки DataFrame'ов, содержащих данные вакансий и резюме,
    используется класс DataParser. Данный класс реализует следующие функции:
    - Чтение описания ваканий и резюме с диска.
    - Парсинг данных ваканий и резюме.
    - Формирование новой структуры данных для описания ваканий и резюме на базе
      DataFrame'а.

    В процессе обработки данных в директории '/data' будут созданы файлы:
    - 'categories.json'
    - 'resume.pkl5'
    - 'vacancy.pkl5'

## 2. Вычисление меры сходства ваканий и их ранжирование

Для поиска данных используются классы BaseModel, BoWModel, TfidfModel и
W2VModel.

Мера сходства описания резюме и описания вакансии вычисляется по формуле:

`score_total = score_title * 0.1 + score_description * 0.9`,

т.е. для вычисления общей меры сходства берется 10% сходства названия вакансии и
90% сходства описания вакансии.

В процессе обработки данных в директории '/data' будут созданы файлы:
    - 'description_w2v.model*'
    - 'title_w2v.model*'

### Поиск резюме по его названию и описанию

Ссылка на резюме: [Руководитель отдела подбора персонала](https://hh.ru/resume/db0fd37e0008c91dcb0039ed1f456f57395a47?customDomain=1)

```
Ожидаем вакансии для резюме: "Руководитель отдела подбора персонала"
```

### Модель: Bag of Words

```
time: 0.044230 for "title_tok"
time: 1.691460 for "description_tok"

            id                                                                    title  title_score  description_score     score                                            url
2003  78360606                                                    Embedded SW Developer     0.000000           0.248517  0.223666  https://hh.ru/vacancy/78360606?customDomain=1
1447  79398960                                            Менеджер по подбору персонала     0.283422           0.188713  0.198184  https://hh.ru/vacancy/79398960?customDomain=1
4901  78945328                 HR / Рекрутер / Менеджер по подбору персонала (удаленно)     0.191083           0.191225  0.191211  https://hh.ru/vacancy/78945328?customDomain=1
4660  79398410                                          Специалист по подбору персонала     0.323911           0.171003  0.186293  https://hh.ru/vacancy/79398410?customDomain=1
785   79159444                                            Менеджер по подбору персонала     0.283422           0.174887  0.185740  https://hh.ru/vacancy/79159444?customDomain=1
152   79396662                                                  Рекрутер в онлайн школу     0.000000           0.201337  0.181203  https://hh.ru/vacancy/79396662?customDomain=1
2687  76465782                                            Менеджер по подбору персонала     0.283422           0.160669  0.172944  https://hh.ru/vacancy/76465782?customDomain=1
2981  78770945  Специалист по подбору персонала (массовый подбор, Аэропорт Шереметьево)     0.350643           0.151122  0.171074  https://hh.ru/vacancy/78770945?customDomain=1
101   70671673           Менеджер по подбору персонала (Строительство, массовый подбор)     0.351541           0.149761  0.169939  https://hh.ru/vacancy/70671673?customDomain=1
3081  79159911                                                            HR-специалист     0.052271           0.177369  0.164859  https://hh.ru/vacancy/79159911?customDomain=1
```

### Модель: Tf-idf

```
time: 0.044330 for "title_tok"
time: 1.671819 for "description_tok"

            id                                                           title  title_score  description_score     score                                            url
152   79396662                                         Рекрутер в онлайн школу     0.000000           0.281157  0.253042  https://hh.ru/vacancy/79396662?customDomain=1
1447  79398960                                   Менеджер по подбору персонала     0.284550           0.207019  0.214772  https://hh.ru/vacancy/79398960?customDomain=1
4901  78945328        HR / Рекрутер / Менеджер по подбору персонала (удаленно)     0.164857           0.159141  0.159713  https://hh.ru/vacancy/78945328?customDomain=1
1163  78574502                                         Администратор HR отдела     0.000000           0.176319  0.158687  https://hh.ru/vacancy/78574502?customDomain=1
640   78090936                                           Тимлид группы рекламы     0.023980           0.150725  0.138050  https://hh.ru/vacancy/78090936?customDomain=1
4942  55267648                           Полицейский патрульно-постовой службы     0.000000           0.147712  0.132941  https://hh.ru/vacancy/55267648?customDomain=1
785   79159444                                   Менеджер по подбору персонала     0.284550           0.115677  0.132564  https://hh.ru/vacancy/79159444?customDomain=1
101   70671673  Менеджер по подбору персонала (Строительство, массовый подбор)     0.301582           0.096560  0.117062  https://hh.ru/vacancy/70671673?customDomain=1
780   78569641     Менеджер по управлению персоналом в Интернет магазин Цветов     0.000000           0.129900  0.116910  https://hh.ru/vacancy/78569641?customDomain=1
2409  79153994       HR Generalist / Менеджер по подбору и адаптации персонала     0.150689           0.109478  0.113599  https://hh.ru/vacancy/79153994?customDomain=1
```

### Модель: Word2vec

```
time: 1.067462 for "title_tok"
time: 0.296537 for "description_tok"

            id                                                          title  title_score  description_score     score                                            url
3298  79056352                                             Бухгалтер-кадровик     0.561965           0.804742  0.780464  https://hh.ru/vacancy/79056352?customDomain=1
4170  78772315                  Специалист по делопроизводству в отдел продаж     0.745453           0.733820  0.734984  https://hh.ru/vacancy/78772315?customDomain=1
3710  78055913                                        Специалист казначейства     0.715395           0.733949  0.732094  https://hh.ru/vacancy/78055913?customDomain=1
2625  77199973                               Бухгалтер на участок Банк-Клиент     0.786892           0.721512  0.728050  https://hh.ru/vacancy/77199973?customDomain=1
4281  78070939                  Бухгалтер по обработке первичной документации     0.675289           0.733354  0.727548  https://hh.ru/vacancy/78070939?customDomain=1
1191  78557154                               Бухгалтер на участок Клиент-Банк     0.786892           0.717049  0.724033  https://hh.ru/vacancy/78557154?customDomain=1
1893  79124363                                                      Бухгалтер     0.541249           0.743959  0.723688  https://hh.ru/vacancy/79124363?customDomain=1
2617  78672716                                Заместитель главного бухгалтера     0.688295           0.724088  0.720509  https://hh.ru/vacancy/78672716?customDomain=1
4152  79368801              Ведущий экономист отдела учета кредитных операций     0.743407           0.716859  0.719513  https://hh.ru/vacancy/79368801?customDomain=1
1232  78356083  Бухгалтер на участок банк-клиент (в строительную организацию)     0.823361           0.706893  0.718540  https://hh.ru/vacancy/78356083?customDomain=1
```

## 3. Реализация REST-сервиса для поиска Топ-10 наиболее релевантный вакансий

TODO: В работе.

